<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>Admin Control</title>
<style>
  body{font-family: Arial; padding:20px}
  input{padding:8px; margin:4px; width:250px}
  button{padding:8px 12px; margin:4px}
  table{width:100%; border-collapse:collapse; margin-top:20px}
  td,th{border:1px solid #ccc; padding:8px}
  img{height:50px}
</style>
</head>
<body>

<h2>Admin â€“ Product Manager</h2>

<input id="pname" placeholder="Name">
<input id="pprice" placeholder="Price" type="number">
<input id="pimg" placeholder="Image URL">

<button onclick="addProduct()">Add</button>

<table id="table">
<thead>
<tr><th>Name</th><th>Price</th><th>Image</th><th>Action</th></tr>
</thead>
<tbody></tbody>
</table>

<button onclick="exportJSON()">Export JSON</button>

<script>
let products = [];

function addProduct(){
  const n = document.getElementById("pname").value;
  const p = document.getElementById("pprice").value;
  const i = document.getElementById("pimg").value;
  if(!n) return alert("Name required");

  products.push({id: Date.now(), name:n, price:p, img:i});
  render();
}

function deleteProduct(id){
  products = products.filter(x => x.id !== id);
  render();
}

function render(){
  const tbody = document.querySelector("#table tbody");
  tbody.innerHTML = products.map(p => `
    <tr>
      <td>${p.name}</td>
      <td>${p.price}</td>
      <td><img src="${p.img}"></td>
      <td><button onclick="deleteProduct(${p.id})">Delete</button></td>
    </tr>
  `).join("");
}

function exportJSON(){
  const data = JSON.stringify(products, null, 2);
  const blob = new Blob([data], {type: "application/json"});
  const url = URL.createObjectURL(blob);
  const a = document.createElement("a");
  a.href = url;
  a.download = "products.json";
  a.click();
}
</script>

</body>
</html>
